!function(e){function n(n){function o(e){for(var o=n.getData(),i=0;i<o.length;i++)if(o[i].label==e)return o[i];return null}function i(e){var i=o(e);if(i){var l=n.getOptions(),d=!1;if("undefined"==typeof i.points.oldShow&&(i.points.oldShow=!1),"undefined"==typeof i.lines.oldShow&&(i.lines.oldShow=!1),i.points.show&&!i.points.oldShow&&(i.points.show=!1,i.points.oldShow=!0,d=!0),i.lines.show&&!i.lines.oldShow&&(i.lines.show=!1,i.lines.oldShow=!0,d=!0),d)i.oldColor=i.color,i.color="#fff",s(l,e,!0);else{var t=!1;!i.points.show&&i.points.oldShow&&(i.points.show=!0,i.points.oldShow=!1,t=!0),!i.lines.show&&i.lines.oldShow&&(i.lines.show=!0,i.lines.oldShow=!1,t=!0),t&&(i.color=i.oldColor,s(l,e,!1))}}}function l(){n.setData(n.getData()),n.setupGrid(),n.draw()}function s(e,n,o){e.legend.hidden||(e.legend.hidden=[]);var i=e.legend.hidden.indexOf(n);o?0>i&&e.legend.hidden.push(n):i>-1&&e.legend.hidden.splice(i,1)}function d(n){n.mouseenter(function(){e(this).css("cursor","pointer")}).mouseleave(function(){e(this).css("cursor","default")}).unbind("click").click(function(){i(e(this).is(".legendColorBox")?e(this).next(".legendLabel").text():e(this).parent().text()),l()})}function t(e){var n=e.getOptions();if(n.legend.hideable){var o=e.getPlaceholder();if(d(o.find(".graphlabel")),d(o.find(".legendColorBox")),!a&&(a=!0,n.legend.hidden)){for(var s=0;s<n.legend.hidden.length;s++)i(n.legend.hidden[s],!0);l()}}}function h(e,n){n.legend.hideable&&(n.legend.labelFormatter=function(e){return'<span class="graphlabel">'+e+"</span>"})}function r(e,n){var o=e.getOptions();if(o.legend.hideable){if(o.legend.hidden&&o.legend.hidden.indexOf(n.label)>-1){var i=!1;n.points.show&&(n.points.show=!1,n.points.oldShow=!0,i=!0),n.lines.show&&(n.lines.show=!1,n.lines.oldShow=!0,i=!0),i&&(n.oldColor=n.color,n.color="#fff",Array.prototype.push.apply(o.legend.saved_hidden,o.legend.hidden.splice(o.legend.hidden.indexOf(n.label),1)))}n.points.show||n.lines.show||(n.datapoints.format=[null,null])}}var a=!1;n.hooks.processOptions.push(h),n.hooks.draw.push(function(e){t(e)}),n.hooks.processDatapoints.push(r)}var o={};e.plot.plugins.push({init:n,options:o,name:"hiddenGraphs",version:"1.1"})}(jQuery);
